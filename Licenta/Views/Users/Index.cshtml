@using Licenta.Common.Entities
@using Microsoft.AspNet.Identity
@using PagedList
@using PagedList.Mvc

@*@model Licenta.Common.Entities.ApplicationUser*@
@*@{
    ViewBag.Title = "Afisare utilizatori"; }
<ol class="breadcrumb">
    <li><h3>@ViewBag.Title</h3></li>
</ol>
@foreach (var user in ViewBag.UsersList)
{<div class="panel-heading">Nume utilizator: @user.UserName</div>
<div class="panel-body">
    <i class="glyphicon glyphicon-envelope"></i> Email utilizator: <span class="label label-default">@user.Email</span>
    <br /><br />
    @if (@user.PhoneNumber != null)
    {<i class="glyphicon glyphicon-phone"></i>@:Telefon utilizator:<span class="label label-default">@user.PhoneNumber</span>
}
</div>
<div class="panel-footer">
    <a class="btn btn-sm btn-success" href="/Users/Edit/@user.Id"> Afisare utilizator</a>
</div>
<br /><br />
}*@


<div class="container">
    @if (TempData.ContainsKey("message"))
    {
        <h3 class="alert alert-info" role="alert">@ViewBag.message</h3>
    }
    <div class="row">


        <div class="col-md-12 page-content">
            <div class="inner-box">
                <h2 class="title-2"><i class="icon-user"></i> Afisare Utilizatori </h2>

                <div class="table-responsive">

                    @if (Model.Users.Count == 0)
                    {
                        <p>Nu exista utilizatori! </p>
                    }
                    else
                    {
                        <table id="addManageTable"
                               class="table table-striped table-bordered add-manage-table table demo"
                               data-filter="#filter" data-filter-text-only="true">
                            <thead>
                                <tr>
                                    <th> Fotografie</th>
                                    <th data-sort-ignore="true"> Detalii Utilizator</th>
                                    <th> Optiune</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (ApplicationUser user in Model.Users)
                                {
                                    @*@Html.Partial("ProductInfo", interest.Product);*@
                                    <tr>
                                        <td style="width:15%" class="add-img-td">
                                            <a href="/Users/Edit/@user.Id">
                                                <img class="thumbnail  img-responsive"
                                                     src="@Url.Action("UserPhotos", "Account", new { id = user.Id})"
                                                     alt="img">
                                            </a>
                                        </td>
                                        <td style="width:75%" class="ads-details-td">
                                            <div>
                                                <p>
                                                    <strong>
                                                        <a href="/Users/Edit/@user.Id">
                                                            Nume utilizator: @user.UserName
                                                        </a>
                                                    </strong>
                                                </p>

                                                <p>
                                                    <strong> <i class="glyphicon glyphicon-envelope"></i> Email utilizator: </strong>
                                                    @user.Email
                                                </p>

                                                @if (@user.PhoneNumber != null)
                                                {
                                                    <p>
                                                        <strong> <i class="glyphicon glyphicon-phone"></i>Telefon utilizator: </strong>
                                                        @user.PhoneNumber
                                                    </p>
                                                }

                                            </div>
                                        </td>
                                        
                                        <td style="width:10%" class="action-td">
                                            <div>
                                                <p>
                                                    <a class="btn btn-sm btn-success" href="/Users/Edit/@user.Id"> Afisare utilizator</a>
                                                </p>
                                               
                                            </div>
                                        </td>
                                    </tr>
                                }


                            </tbody>
                        </table>
                    }
                </div>
                <!--/.row-box End-->

            </div>

            @if (Model.Users != null)
            {
                <div class="pagination-bar text-center">
                    <nav aria-label="Page navigation " class="d-inline-b">
                        Pagina @(Model.Users.PageCount < Model.Users.PageNumber ? 0 : Model.Users.PageNumber) din @Model.Users.PageCount

                        @Html.PagedListPager((IPagedList)Model.Users, page => Url.Action("Index", new { page = page}),
                                         new PagedListRenderOptions
                                         {
                                             FunctionToTransformEachPageLink = (liTag, aTag) => { aTag.Attributes.Add("class", "page-link".ToString()); return aTag; },
                                             LiElementClasses = new string[] { "page-item" },
                                         })
                    </nav>
                </div>
            }


        </div>
        <!--/.page-content-->
    </div>
    <!--/.row-->
</div>
<!--/.container-->