@model Licenta.Common.Entities.Product

@{
    ViewBag.Titlu = "Editare Anunt";
}

<div class="row">
    <div class="col-md-9 page-content">
        <div class="inner-box category-content">
            <h2 class="title-2 uppercase">
                <strong>
                    <i class="icon-docs"></i> Editare Anunt
                </strong>
            </h2>

            <div class="row">
                <div class="col-sm-12">
                    <form method="post" action="/Product/Edit/@Model.ProductId" class="form-horizontal">
                        @Html.HttpMethodOverride(HttpVerbs.Put)

                        @Html.HiddenFor(m => m.ProductId)
                        @Html.HiddenFor(m => m.Date)
                        @Html.HiddenFor(m => m.UserId)

                        <div class="content-subheading">
                            <i class="icon-tag"></i>
                            <strong>
                                Editeaza titlul si categoria
                            </strong>
                        </div>


                        <div class="form-group row">
                            @Html.Label("Title", "Titlu Anunt", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.Title, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Selectati Categoria</label>
                            <div class="col-sm-8">
                                @Html.DropDownList("catList", new SelectList(ViewBag.Categories, "Value", "Text"), "Selectati categoria", new { id = "catList", @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Selectati Subcategoria</label>
                            <div class="col-sm-8">
                                @Html.DropDownListFor(m => m.SubCategoryId, new SelectList(Enumerable.Empty<SelectListItem>(), "Value", "Text"), "Selectati subcategoria", new { id = "subcatList", @class = "form-control" })
                            </div>
                        </div>


                        <div class="content-subheading">
                            <i class="icon-camera"></i>
                            <strong>
                                Modifica Galeria Foto
                            </strong>
                        </div>

                        <div class="form-group row">
                            @Html.Label("ProductPhotos", "Poze Anunt", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                <button class="btn btn-primary" onclick="location.href='@Url.Action("ManageGallery", "Product", new { id = Model.ProductId})';return false;">Modifica Galeria</button>
                            </div>
                        </div>


                        <div class="content-subheading">
                            <i class="icon-book-open"></i>
                            <strong>
                                Modifica detaliile produsului
                            </strong>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Selectati Starea Produsului</label>
                            <div class="col-sm-8">
                                @Html.DropDownListFor(m => m.ProductStateId, new SelectList(Model.ProductStateTypes, "Value", "Text"), "Selectati starea", new { @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("Description", "Descriere Anunt", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.Description, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("ReturnPolicy", "Politica de retur", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.ReturnPolicy, new { htmlAttributes = new { @class = "form-control" } })
                                <small id="" class="form-text text-muted">
                                    Camp optional
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("Warranty", "Garantie", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.Warranty, new { htmlAttributes = new { @class = "form-control" } })
                                <small id="" class="form-text text-muted">
                                    Camp optional
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("Site", "Link-ul site-ului de prezentare", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.Site, new { htmlAttributes = new { @class = "form-control" } })
                                <small id="" class="form-text text-muted">
                                    Camp optional
                                </small>
                            </div>
                        </div>


                        <div class="content-subheading">
                            <i class="icon-money"></i>
                            <strong>
                                Modifica pretul si modalitatile
                                de vanzare
                            </strong>
                        </div>

                        <div class="form-group row">
                            @Html.Label("Price", "Pret", new { @class = "col-sm-3 col-form-label" })
                            <div class="input-group col-sm-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">RON</span>
                                </div>
                                @Html.EditorFor(m => m.Price, new { htmlAttributes = new { @class = "form-control", @required = "required" } })
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Selectati Orasul</label>
                            <div class="col-sm-8">
                                @Html.DropDownListFor(m => m.CityId, new SelectList(Model.Cities, "Value", "Text"), "Selectati orasul", new { @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("PersonalDelivery", "Predare personala", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @if (Model.PersonalDelivery == true)
                                {
                                    @Html.CheckBox("PersonalDelivery", true, new { @class = "checkbox" })
                                }
                                else
                                {
                                    @Html.CheckBox("PersonalDelivery", false, new { @class = "checkbox" })
                                }
                            </div>
                        </div>


                        <div class="content-subheading">
                            <i class="icon-truck-1"></i>
                            <strong>
                                Modificare livrare prin curier
                            </strong>
                        </div>
                        
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label">Selectati firma de curierat</label>
                            <div class="col-sm-8">
                                @Html.DropDownListFor(m => m.DeliveryCompanyId, new SelectList(Model.DeliveryCompanies, "Value", "Text"), "Selectati compania de curierat", new { @class = "form-control" })
                                <small id="" class="form-text text-muted">
                                    Camp optional
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("DeliveryDetails", "Detalii livrare", new { @class = "col-sm-3 col-form-label" })
                            <div class="col-sm-8">
                                @Html.EditorFor(m => m.DeliveryDetails, new { htmlAttributes = new { @class = "form-control" } })
                                <small id="" class="form-text text-muted">
                                    Camp optional
                                </small>
                            </div>
                        </div>

                        <div class="form-group row">
                            @Html.Label("DeliveryPrice", "Cost Livrare", new { @class = "col-sm-3 col-form-label" })
                            <div class="input-group col-sm-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">RON</span>
                                </div>
                                @Html.EditorFor(m => m.DeliveryPrice, new { htmlAttributes = new { @class = "form-control" } })
                            })
                            </div>
                        </div>


                        <br />
                        <!-- Button  -->
                        <div class="form-group row">
                            <label class="col-sm-3 col-form-label"></label>
                            <div class="col-sm-8">
                                <div style="clear:both"></div>
                                <button class="btn btn-primary" type="submit">Modifica anunt</button>
                            </div>
                        </div>


                    </form>
        </div>
            </div>
        </div>
    </div>

    <div class="col-md-3 reg-sidebar">
        <div class="reg-sidebar-inner text-center">
            <div class="promo-text-box">
                <i class=" icon-picture fa fa-4x icon-color-1"></i>

                <h3><strong>Poti adauga anunturi nelimitate gratis</strong></h3>

                <p>
                    Acest site iti ofera posibilitatea de a publica anunturi gratuite pentru orasul tau si imprejurimile sale.
                    Vei gasi usor anunturi gratuite interesante din Bucuresti, Ilfov si alte orase din tara si vei putea intra usor in legatura cu cei care le-au publicat.
                    Te asteapta o varietate de produse la preturi mici.
                </p>
            </div>

            <div class="card sidebar-card">
                <div class="card-header uppercase">
                    <small><strong>Cum poti vinde mai rapid?</strong></small>
                </div>
                <div class="card-content">
                    <div class="card-body text-left">
                        <ul class="list-check">
                            <li> Utilizati un titlu si o descriere a anuntului scurta si la obiect</li>
                            <li> Asigura-te ca inacdrezi anuntul in categoria si subcategoria potrivita</li>
                            <li> Adauga fotografii clare</li>
                            <li> Adauga un pret rezonanil</li>
                            <li> Verificati ce ati completat inainte de a publica anuntul</li>

                        </ul>
                    </div>
                </div>
            </div>


        </div>
    </div>
    <!--/.reg-sidebar-->
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script type="text/javascript">
    //incarcarea initiala a celor 2 dropdown-uri
    $(document).ready(function () {
        $(document).ready(function () {
            //var cID = $("#catList").val();
            var cID = @ViewBag.CategoryId;
            $.getJSON("/Product/New/LoadSubCategories/" + cID, {},
                function (data) {
                    var select = $("#subcatList");
                    select.empty();
                    select.append($('<option/>', {
                        value: 0,
                        text: "Selecteaza o subcategorie"
                    }));
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.Value,
                            text: itemData.Text
                        }));
                    });
                    $("#catList").val(@ViewBag.CategoryId);
                    $("#subcatList").val(@Model.SubCategoryId);
                });
        });
    });

    //evenimentul change
    $(document).ready(function () {
        $(document).on("change", "#catList", function () {
            var cID = $(this).val();
            $.getJSON("/Product/New/LoadSubCategories/" + cID, {},
                function (data) {
                    var select = $("#subcatList");
                    select.empty();
                    select.append($('<option/>', {
                        value: 0,
                        text: "Selecteaza o subcategorie"
                    }));
                    $.each(data, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.Value,
                            text: itemData.Text
                        }));
                    });
                  });
        });
    });


</script>

